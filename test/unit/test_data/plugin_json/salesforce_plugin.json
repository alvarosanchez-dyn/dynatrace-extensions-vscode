{
  "name": "custom.remote.python.salesforce_eventstream",
  "version": "1.044",
  "metricGroup": "tech.Salesforce",
  "technologies": [
    "Salesforce"
  ],
  "type": "python",
  "entity": "CUSTOM_DEVICE",
  "source": {
    "package": "salesforce_eventstream",
    "className": "SalesforceEventStream",
    "install_requires": ["psutil==5.9.4"]
  },
  "properties": [
    {"key": "salesforce_username", "type": "String"},
    {"key": "salesforce_password", "type": "Password"},
    {"key": "salesforce_authentication_method", "type": "Dropdown", "dropdownValues":  ["Connected App", "Username + Password"], "defaultValue": "Connected App"},
    {"key": "salesforce_security_token", "type": "Password"},
    {"key": "salesforce_url", "type": "String"},
    {"key": "salesforce_client_certificate_chain", "type": "String"},
    {"key": "salesforce_client_certificate_key", "type": "String"},
    {"key": "salesforce_consumer_key", "type": "Textarea"},
    {"key": "salesforce_audience", "type": "String", "defaultValue":  "https://login.salesforce.com"},
    {"key": "salesforce_keystore_location", "type": "String"},
    {"key": "salesforce_keystore_password", "type": "Password"},
    {"key": "salesforce_key_alias", "type": "String"},
    {"key": "salesforce_key_password", "type": "Password"},
    {"key": "capture_user_details", "type": "Boolean", "defaultValue": true},
    {"key": "log_level", "type": "Dropdown", "dropdownValues":  ["INFO", "DEBUG"], "defaultValue": "INFO"},
    { "key": "jvm_extra_args", "type": "Textarea" },
    {"key": "openkit_application_id", "type": "String"},
    {"key": "openkit_beacon_url", "type": "String", "defaultValue": "https://localhost:9999/mbeacon/<environment_id>"},
    {"key": "capture_lightning_uri", "type": "Boolean", "defaultValue": true},
    {"key": "capture_logout", "type": "Boolean", "defaultValue": true},
    {"key": "capture_api", "type": "Boolean", "defaultValue": false},
    {"key": "capture_listview", "type": "Boolean", "defaultValue": true},
    {"key": "capture_uri", "type": "Boolean", "defaultValue": true},
    {"key": "capture_report", "type": "Boolean", "defaultValue": true},
    {"key": "capture_concur_long_run_apex_err", "type": "Boolean", "defaultValue": true},
    {"key": "users_blocklist", "type": "Textarea", "defaultValue": ""},
    {"key": "max_session_age_minutes", "type": "Integer", "defaultValue": 1440},
    {"key": "proxy_address", "type": "String"},
    {"key": "proxy_username", "type": "String"},
    {"key": "proxy_password","type": "Password"}
  ],
  "configUI": {
    "displayName": "Salesforce EventStream",
    "properties": [
      {"key": "openkit_beacon_url", "displayName": "Openkit Beacon URL", "displayOrder": 100, "displayHint": "Can use the local activegate at https://localhost:9999/mbeacon/<environment_id>"},
      {"key": "openkit_application_id", "displayName": "Openkit Application ID", "displayOrder": 110,"displayHint": "https://www.dynatrace.com/support/help/shortlink/custom-application-settings#step-1-define-the-custom-application"},
      {"key": "salesforce_username", "displayName": "Salesforce username", "displayOrder": 120},
      {"key": "salesforce_authentication_method", "displayName": "Salesforce Authentication Method", "displayOrder": 130},
      {"key": "salesforce_password", "displayName": "(Username + Password) Salesforce password", "displayOrder": 140, "displayHint":  "Only needed if authentication method is Username + Password"},
      {"key": "salesforce_consumer_key", "displayName": "(Connected App) Consumer Key", "displayOrder": 150},
      {"key": "salesforce_audience", "displayName": "(Connected App) Audience", "displayOrder": 160, "displayHint": "https://login.salesforce.com, https://test.salesforce.com or https://site.force.com/customers"},
      {"key": "salesforce_keystore_location", "displayName": "(Connected App) JKS path", "displayOrder": 170, "displayHint": "Path to the conneceted app Java Keystore file, example: /var/certs/connected_apps.jks"},
      {"key": "salesforce_keystore_password", "displayName": "(Connected App) JKS password", "displayOrder": 180},
      {"key": "salesforce_key_alias", "displayName": "(Connected App) JKS Key Alias", "displayOrder": 190, "displayHint":  "Certificate alias inside the JKS (can check with keytool -list -keystore)"},
      {"key": "salesforce_key_password", "displayName": "(Connected App) JKS Key Password", "displayOrder": 200, "displayHint":  "Password for the specific key alias, usually it is the same as the JKS password"},
      {"key": "salesforce_security_token", "displayName": "(Username + Password, Optional) Salesforce security token", "displayOrder": 210, "displayHint": "Mandatory if not using mutual certificates"},
      {"key": "salesforce_url", "displayName": "(Optional) Salesforce instance url", "displayOrder": 112, "displayHint":  "If empty, https://login.salesforce.com is used, mandatory if using mutual certificates (with port 8443) or a sandbox instance"},
      {"key": "salesforce_client_certificate_chain", "displayName": "(Optional) Salesforce certificate chain file", "displayOrder": 230, "displayHint":  "Path to the full certificate chain pem file. Only required if using mutual certificates"},
      {"key": "salesforce_client_certificate_key", "displayName": "(Optional) Salesforce certificate key file", "displayOrder": 240, "displayHint":  "Path to the certificate key pem file. Only required if using mutual certificates"},
      {"key": "capture_user_details", "displayName": "Capture User Information", "displayOrder": 250, "displayHint": "Captures usernames and IP addresses"},
      {"key": "capture_lightning_uri", "displayName": "Capture LightningUri events", "displayOrder": 260},
      {"key": "capture_logout", "displayName": "Capture Logout events", "displayOrder": 260},
      {"key": "capture_api", "displayName": "Capture API events", "displayOrder": 270},
      {"key": "capture_listview", "displayName": "Capture ListView events", "displayOrder": 280},
      {"key": "capture_uri", "displayName": "Capture Uri events", "displayOrder": 290},
      {"key": "capture_report", "displayName": "Capture Report events", "displayOrder": 300},
      {"key": "capture_concur_long_run_apex_err", "displayName": "Capture Concurrent Long Running Apex Errors", "displayOrder": 302},
      {"key": "users_blocklist", "displayName": "Ignore usernames", "displayHint": "Users to EXCLUDE from monitoring. One per line. Exclude automation/bots you may have", "displayOrder": 304},
      {"key": "max_session_age_minutes", "displayName": "Maximum session age (minutes)", "defaultValue": 1440, "displayOrder": 310, "displayHint": "Some sessions never logout (example: API requests), this forcefully ends sessions after X minutes"},
      {"key": "proxy_address", "displayName": "(Optional) Proxy Address", "displayHint": "http(s)://<my.proxy.host>:<port>", "displayOrder": 320},
      {"key": "proxy_username", "displayName": "(Optional) Proxy Username", "displayOrder": 330},
      {"key": "proxy_password", "displayName": "(Optional) Proxy Password", "displayOrder": 340},
      {"key" : "jvm_extra_args", "displayName": "(Optional) Java extra arguments",           "displayOrder": 355, "displayHint": "Extra JVM arguments, example: -Xmx4g (one per line)"},
      {"key": "log_level", "displayName": "Log level", "dropdownValues":  ["INFO", "DEBUG"], "defaultValue": "INFO", "displayOrder": 350}
    ]
  },
  "metrics": [],
  "ui": {}
}
